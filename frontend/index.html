<!DOCTYPE html>
<html lang="ru" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <title>Music Resolver</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; media-src 'self';">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="logo">
                <span class="logo-icon">üéµ</span>
                <span class="logo-text">Resolver</span>
            </div>

            <nav class="nav-main">
                <button class="nav-item active" data-tab="listen">
                    <span class="nav-icon">üéß</span>
                    <span class="nav-label">Listen</span>
                </button>
                <button class="nav-item" data-tab="playlists">
                    <span class="nav-icon">üìÇ</span>
                    <span class="nav-label">Playlists</span>
                </button>
            </nav>

            <div class="sidebar-section">
                <div class="section-title" id="libraryTitle">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</div>

                <!-- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã -->
                <div class="playlist-list system-playlists">
                    <div class="playlist-item" data-playlist="favorites">
                        <span class="playlist-icon favorites-icon">‚ù§Ô∏è</span>
                        <span class="playlist-name" id="favoritesName">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                        <span class="playlist-count" id="favoritesCount">0</span>
                    </div>
                    <div class="playlist-item" data-playlist="downloaded">
                        <span class="playlist-icon downloaded-icon">üì•</span>
                        <span class="playlist-name" id="downloadedName">–°–∫–∞—á–∞–Ω–Ω—ã–µ</span>
                        <span class="playlist-count" id="downloadedCount">0</span>
                    </div>
                </div>

                <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å -->
                <div class="playlist-divider">
                    <span class="divider-line"></span>
                    <span class="divider-text" id="userPlaylistsLabel">–ú–æ–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã</span>
                    <span class="divider-line"></span>
                </div>

                <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã -->
                <div class="playlist-list user-playlists" id="userPlaylists">
                    <!-- –ü–ª–µ–π–ª–∏—Å—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                </div>

                <button class="add-playlist-btn" id="addPlaylistSidebar">
                    <span class="plus-icon">+</span>
                    <span id="addPlaylistLabel">–°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç</span>
                </button>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main">
            <header class="topbar">
                <div class="search-bar">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="globalSearch" placeholder="–ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤, –∞—Ä—Ç–∏—Å—Ç–æ–≤...">
                </div>
                <div class="topbar-actions">
                    <button id="langToggle" class="icon-btn" title="Change language">
                        <span class="lang-text">EN</span>
                    </button>
                    <button id="themeToggle" class="icon-btn" title="Toggle theme">
                        <span class="theme-icon">üåô</span>
                    </button>
                    <div class="user-avatar">
                        <span>üë§</span>
                    </div>
                </div>
            </header>

            <!-- LISTEN VIEW -->
            <section id="listen" class="view active">
                <div class="view-header">
                    <h1 id="listenTitle" class="gradient-text"></h1>
                    <p id="listenSubtitle" class="subtitle"></p>
                </div>

                <div class="input-group glass-effect">
                    <span class="input-icon">üîó</span>
                    <input id="trackInput" type="text" placeholder="">
                    <button id="loadTrack" class="primary-btn">
                        <span class="btn-text">Load</span>
                        <span class="btn-icon">‚Üí</span>
                    </button>
                </div>

                <div class="loader hidden" id="loader">
                    <div class="loader-spinner"></div>
                    <span class="loader-text">Resolving link‚Ä¶</span>
                </div>

                <div class="player hidden" id="player">
                    <div class="player-bg"></div>
                    <div class="player-content">
                        <div class="cover-container">
                            <div class="cover">
                                <div class="cover-overlay">
                                    <button class="play-btn-large" id="playPauseBtn">‚ñ∂</button>
                                </div>
                            </div>
                            <div class="cover-glow"></div>
                        </div>

                        <div class="track-details">
                            <div class="track-info">
                                <strong id="trackTitle" class="track-title"></strong>
                                <span id="trackArtist" class="track-artist"></span>
                            </div>

                            <div class="track-actions">
                                <button class="action-btn like-btn" id="likeBtn" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
                                    <span class="heart-icon">‚ô°</span>
                                </button>
                                <button class="action-btn download-btn" id="downloadBtn" title="–°–∫–∞—á–∞—Ç—å">
                                    <span class="download-icon">üì•</span>
                                </button>
                                <button class="action-btn" id="addToPlaylistBtn" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –ø–ª–µ–π–ª–∏—Å—Ç">
                                    <span>‚ûï</span>
                                </button>
                                <button class="action-btn" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è">
                                    <span>üì§</span>
                                </button>
                            </div>
                        </div>

                        <div class="waveform-container">
                            <div class="waveform" id="waveform"></div>
                            <div class="progress-bar" id="progressBar">
                                <div class="progress-fill" id="progressFill"></div>
                                <div class="progress-handle" id="progressHandle"></div>
                            </div>
                        </div>

                        <div class="time-display">
                            <span id="currentTime">0:00</span>
                            <span id="duration">0:00</span>
                        </div>

                        <div class="player-controls">
                            <button class="control-btn" id="shuffleBtn" title="–ü–µ—Ä–µ–º–µ—à–∞—Ç—å">üîÄ</button>
                            <button class="control-btn" id="prevBtn" title="–ü—Ä–µ–¥—ã–¥—É—â–∏–π">‚èÆ</button>
                            <button class="control-btn play-btn" id="mainPlayBtn">‚ñ∂</button>
                            <button class="control-btn" id="nextBtn" title="–°–ª–µ–¥—É—é—â–∏–π">‚è≠</button>
                            <button class="control-btn" id="repeatBtn" title="–ü–æ–≤—Ç–æ—Ä">üîÅ</button>
                        </div>

                        <div class="volume-control">
                            <span class="volume-icon" id="volumeIcon">üîä</span>
                            <input type="range" id="volumeSlider" min="0" max="100" value="80" class="volume-slider">
                        </div>

                        <audio id="audio"></audio>
                    </div>
                </div>

                <!-- Recently Played -->
                <div class="recent-section" id="recentSection">
                    <h3 class="section-heading" id="recentTitle">–ù–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–ª—É—à–∞–Ω–Ω—ã–µ</h3>
                    <div class="recent-tracks" id="recentTracks">
                        <div class="recent-track" data-id="1">
                            <div class="recent-cover"></div>
                            <div class="recent-info">
                                <span class="recent-name">Summer Nights</span>
                                <span class="recent-artist">Artist Name</span>
                            </div>
                            <button class="like-btn-small" data-id="1">
                                <span class="heart-small">‚ô°</span>
                            </button>
                        </div>
                        <div class="recent-track" data-id="2">
                            <div class="recent-cover"></div>
                            <div class="recent-info">
                                <span class="recent-name">Midnight Dreams</span>
                                <span class="recent-artist">Another Artist</span>
                            </div>
                            <button class="like-btn-small" data-id="2">
                                <span class="heart-small">‚ô°</span>
                            </button>
                        </div>
                        <div class="recent-track" data-id="3">
                            <div class="recent-cover"></div>
                            <div class="recent-info">
                                <span class="recent-name">Ocean Waves</span>
                                <span class="recent-artist">Chill Artist</span>
                            </div>
                            <button class="like-btn-small" data-id="3">
                                <span class="heart-small">‚ô°</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PLAYLISTS VIEW -->
            <section id="playlists" class="view">
                <div class="view-header">
                    <h1 id="playlistTitle" class="gradient-text"></h1>
                    <p id="playlistSubtitle" class="subtitle"></p>
                </div>

                <div class="input-group glass-effect">
                    <span class="input-icon">üìÇ</span>
                    <input id="playlistInput" type="text" placeholder="">
                    <button id="addPlaylist" class="primary-btn">
                        <span class="btn-text">Add</span>
                        <span class="btn-icon">+</span>
                    </button>
                </div>

                <!-- Tabs –¥–ª—è –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ -->
                <div class="playlist-tabs">
                    <button class="tab-btn active" data-playlist-view="all" id="tabAll">–í—Å–µ</button>
                    <button class="tab-btn" data-playlist-view="favorites" id="tabFavorites">‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
                    <button class="tab-btn" data-playlist-view="downloaded" id="tabDownloaded">üì• –°–∫–∞—á–∞–Ω–Ω—ã–µ</button>
                </div>

                <div class="playlist-content" id="playlistContent">
                    <!-- All Tracks -->
                    <div class="playlist-view active" id="viewAll">
                        <div class="playlist-header">
                            <div class="playlist-info">
                                <span class="track-count" id="allTracksCount">3 —Ç—Ä–µ–∫–æ–≤</span>
                                <span class="playlist-duration">~12 –º–∏–Ω</span>
                            </div>
                            <div class="playlist-actions">
                                <button class="sort-btn" id="sortBtn">
                                    <span>‚ÜïÔ∏è</span> –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
                                </button>
                                <div class="sort-menu hidden" id="sortMenu"></div>
                            </div>
                        </div>
                        <div class="tracks-list" id="playlist">
                            <div class="track-item" draggable="true" data-id="1">
                                <span class="track-number">1</span>
                                <div class="track-cover-small"></div>
                                <div class="track-item-info">
                                    <span class="track-item-name">Demo Track 1</span>
                                    <span class="track-item-artist">Artist 1</span>
                                </div>
                                <span class="track-duration">3:24</span>
                                <button class="like-btn-small" data-id="1">
                                    <span class="heart-small">‚ô°</span>
                                </button>
                                <button class="more-btn">‚ãØ</button>
                            </div>
                            <div class="track-item" draggable="true" data-id="2">
                                <span class="track-number">2</span>
                                <div class="track-cover-small"></div>
                                <div class="track-item-info">
                                    <span class="track-item-name">Demo Track 2</span>
                                    <span class="track-item-artist">Artist 2</span>
                                </div>
                                <span class="track-duration">4:12</span>
                                <button class="like-btn-small" data-id="2">
                                    <span class="heart-small">‚ô°</span>
                                </button>
                                <button class="more-btn">‚ãØ</button>
                            </div>
                            <div class="track-item" draggable="true" data-id="3">
                                <span class="track-number">3</span>
                                <div class="track-cover-small"></div>
                                <div class="track-item-info">
                                    <span class="track-item-name">Demo Track 3</span>
                                    <span class="track-item-artist">Artist 3</span>
                                </div>
                                <span class="track-duration">2:58</span>
                                <button class="like-btn-small" data-id="3">
                                    <span class="heart-small">‚ô°</span>
                                </button>
                                <button class="more-btn">‚ãØ</button>
                            </div>
                        </div>
                    </div>

                    <!-- Favorites View -->
                    <div class="playlist-view" id="viewFavorites">
                        <div class="playlist-header favorites-header">
                            <div class="favorites-banner">
                                <span class="favorites-icon-large">‚ù§Ô∏è</span>
                                <div class="favorites-info">
                                    <h2 id="favoritesTitle">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h2>
                                    <p id="favoritesDesc">–¢—Ä–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–∏—Å—å</p>
                                </div>
                            </div>
                        </div>
                        <div class="tracks-list" id="favoritesList">
                            <div class="empty-state" id="emptyFavorites">
                                <span class="empty-icon">üíî</span>
                                <p id="emptyFavoritesText">–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤</p>
                                <span class="empty-hint" id="emptyFavoritesHint">–ù–∞–∂–º–∏—Ç–µ ‚ô° —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫ –≤
                                    –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                            </div>
                        </div>
                    </div>

                    <!-- Downloaded View -->
                    <div class="playlist-view" id="viewDownloaded">
                        <div class="playlist-header downloaded-header">
                            <div class="downloaded-banner">
                                <span class="downloaded-icon-large">üì•</span>
                                <div class="downloaded-info">
                                    <h2 id="downloadedTitle">–°–∫–∞—á–∞–Ω–Ω—ã–µ</h2>
                                    <p id="downloadedDesc">–î–æ—Å—Ç—É–ø–Ω—ã –æ—Ñ–ª–∞–π–Ω</p>
                                </div>
                            </div>
                        </div>
                        <div class="tracks-list" id="downloadedList">
                            <div class="empty-state" id="emptyDownloaded">
                                <span class="empty-icon">üì≠</span>
                                <p id="emptyDownloadedText">–ù–µ—Ç —Å–∫–∞—á–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤</p>
                                <span class="empty-hint" id="emptyDownloadedHint">–ù–∞–∂–º–∏—Ç–µ üì• —á—Ç–æ–±—ã —Å–∫–∞—á–∞—Ç—å —Ç—Ä–µ–∫</span>
                            </div>
                        </div>
                    </div>

                    <!-- User Playlist View (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π) -->
                    <div class="playlist-view" id="viewUserPlaylist">
                        <div class="playlist-header user-playlist-header">
                            <div class="user-playlist-banner">
                                <span class="user-playlist-icon-large" id="currentPlaylistIcon">üéµ</span>
                                <div class="user-playlist-info">
                                    <h2 id="currentPlaylistName">–ü–ª–µ–π–ª–∏—Å—Ç</h2>
                                    <p id="currentPlaylistDesc">0 —Ç—Ä–µ–∫–æ–≤</p>
                                </div>
                                <button class="delete-playlist-btn" id="deletePlaylistBtn" title="–£–¥–∞–ª–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>
                        <div class="tracks-list" id="userPlaylistTracks">
                            <div class="empty-state" id="emptyUserPlaylist">
                                <span class="empty-icon">üéµ</span>
                                <p id="emptyUserPlaylistText">–ü–ª–µ–π–ª–∏—Å—Ç –ø—É—Å—Ç</p>
                                <span class="empty-hint" id="emptyUserPlaylistHint">–î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–∫–∏ —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–∫–∏
                                    ‚ûï</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–∞ -->
    <div class="modal-overlay hidden" id="createPlaylistModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modalTitle">–°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç</h2>
                <button class="modal-close" id="closeModal">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="playlistName" id="labelPlaylistName">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞</label>
                    <input type="text" id="playlistNameInput" placeholder="–ú–æ–π –ø–ª–µ–π–ª–∏—Å—Ç" maxlength="50">
                </div>
                <div class="form-group">
                    <label id="labelPlaylistIcon">–í—ã–±–µ—Ä–∏—Ç–µ –∏–∫–æ–Ω–∫—É</label>
                    <div class="icon-picker" id="iconPicker">
                        <button class="icon-option selected" data-icon="üéµ">üéµ</button>
                        <button class="icon-option" data-icon="üé∏">üé∏</button>
                        <button class="icon-option" data-icon="üéπ">üéπ</button>
                        <button class="icon-option" data-icon="üé∑">üé∑</button>
                        <button class="icon-option" data-icon="ü•Å">ü•Å</button>
                        <button class="icon-option" data-icon="üé§">üé§</button>
                        <button class="icon-option" data-icon="üåô">üåô</button>
                        <button class="icon-option" data-icon="‚òÄÔ∏è">‚òÄÔ∏è</button>
                        <button class="icon-option" data-icon="üî•">üî•</button>
                        <button class="icon-option" data-icon="üí™">üí™</button>
                        <button class="icon-option" data-icon="üéâ">üéâ</button>
                        <button class="icon-option" data-icon="üíú">üíú</button>
                        <button class="icon-option" data-icon="üåä">üåä</button>
                        <button class="icon-option" data-icon="‚≠ê">‚≠ê</button>
                        <button class="icon-option" data-icon="üöÄ">üöÄ</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelCreatePlaylist">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" id="confirmCreatePlaylist">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Modal –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ø–ª–µ–π–ª–∏—Å—Ç -->
    <div class="modal-overlay hidden" id="addToPlaylistModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="addToPlaylistTitle">–î–æ–±–∞–≤–∏—Ç—å –≤ –ø–ª–µ–π–ª–∏—Å—Ç</h2>
                <button class="modal-close" id="closeAddToPlaylistModal">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="playlists-select" id="playlistsSelect">
                    <!-- –ü–ª–µ–π–ª–∏—Å—Ç—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ -->
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
</body>

</html>